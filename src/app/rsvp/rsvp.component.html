<div class="p-rsvp">
  <div class="row">
    <div class="col-xs-12">
      <h1 class="p-title">RSVP</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 col-md-9 form-container">
      <form #rsvpForm="ngForm" (ngSubmit)="onSubmit();rsvpForm.reset()">
        <div *ngIf="submitted" class="form-success-message">
          <p>Thank you {{guestName}} for the RSVP. See you next month! :)</p>
        </div>

        <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="error-message">
          <div *ngIf="firstName.errors.required">
            First Name is required.
          </div>
          <div *ngIf="firstName.errors.minlength">
            First Name must be at least 2 characters long.
          </div>
        </div>
        <label>First Name:</label>
        <input type="text" [(ngModel)]="this.guest.firstName" name="firstName" placeholder="Biggie" minlength="2" maxlength="30" #firstName="ngModel"  required />

        <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="error-message">
          <div *ngIf="lastName.errors.required">
            Last Name is required.
          </div>
          <div *ngIf="lastName.errors.minlength">
            Last Name must be at least 2 characters long.
          </div>
        </div>
        <label>Last Name:</label>
        <input type="text" [(ngModel)]="this.guest.lastName" name="lastName" placeholder="Smalls" minlength="2" maxlength="30" #lastName="ngModel"  required />

        <div *ngIf="email.invalid && (email.dirty || email.touched)" class="error-message">
          <div *ngIf="email.errors.required">
            Email is required.
          </div>
          <div *ngIf="email.errors.email">
            Email must be a valid format.
          </div>
        </div>
        <label>Email:</label>
        <input type="email" [(ngModel)]="this.guest.email" name="email" placeholder="biggie@smalls.com" maxlength="50"  #email="ngModel" required email />

        <label>Plus One?</label>
        <input type="checkbox" [(ngModel)]="this.guest.bringingPlusOne" name="bringingPlusOne" />
        <span *ngIf="this.guest.bringingPlusOne" class="plus-one-details">
          <label>First Name</label>
          <input type="text" [(ngModel)]="this.guest.plusOne.firstName" name="plusOneFirstName" placeholder="Puff" maxlength="30" />
          <label>Last Name</label>
          <input type="text" [(ngModel)]="this.guest.plusOne.lastName" name="plusOneLastName" placeholder="Daddy" maxlength="30" />
        </span>
        <button [disabled]="!rsvpForm.form.valid" type="submit" value="Send"><a>Submit</a> </button>
      </form>
    </div>
    <div class="col-xs-12 col-md-3 stats-container">
      <h3>Counter:</h3>
      <span class="total-rsvp">{{ (items | async)?.length }}</span>
      <!-- <ul>
        <li *ngFor="let item of items | async">
          {{item.$key}}: {{item.$value}}
        </li>
      </ul> -->
    </div>
  </div>
</div>
